<!-- build time:Sat Oct 07 2023 17:59:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="MrNobody's Blog" href="http://mrnobody233.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="MrNobody's Blog" href="http://mrnobody233.github.io/atom.xml"><link rel="alternate" type="application/json" title="MrNobody's Blog" href="http://mrnobody233.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="前端,小程序"><link rel="canonical" href="http://mrnobody233.github.io/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><title>微信小程序 - web前端 | MrNobody = MrNobody's Blog = 保持呼吸 不要断气</title><meta name="generator" content="Hexo 6.1.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">微信小程序</h1><div class="meta"><span class="item" title="创建时间：2022-08-21 18:49:45"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-08-21T18:49:45+08:00">2022-08-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>15k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>14 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">MrNobody</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?37191"></li><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?698340"></li><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?731491"></li><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?939221"></li><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?773734"></li><li class="item" data-background-image="http://imgapi.xl0408.top/index.php?748463"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="item" rel="index" title="分类于 web前端"><span itemprop="name">web前端</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mrnobody233.github.io/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Mr_Nobody"><meta itemprop="description" content="保持呼吸 不要断气, MrNobody"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MrNobody's Blog"></span><div class="body md" itemprop="articleBody"><h1 id="wxml-和-html-的区别"><a class="anchor" href="#wxml-和-html-的区别">#</a> WXML 和 HTMl 的区别</h1><ol><li><p>标签名称不同</p><ul><li>HTML ( div span img a )</li><li>WXML ( view text image navigator )</li></ul></li><li><p>属性节点不同</p><ul><li><code>&lt;a href="#"&gt; 超链接 &lt;/a&gt;</code></li><li><code>&lt;navigator url="/pages/index/index"&gt; 主页 &lt;/navigator&gt;</code></li></ul></li><li><p>提供了类似 Vue 中的模板语法</p><ul><li>数据绑定</li><li>列表渲染</li><li>条件渲染</li></ul></li></ol><hr><h1 id="wxss"><a class="anchor" href="#wxss">#</a> WXSS</h1><p>一套样式语言，类似 CSS</p><h2 id="区别"><a class="anchor" href="#区别">#</a> 区别</h2><ol><li>新增 rpx 尺寸单位</li></ol><ul><li>WXSS 在底部支持新的尺寸单位 rpx，在不同大小的屏幕上小程序会自动进行换算</li></ul><ol start="2"><li>提供了全局的样式和局部样式</li></ol><ul><li>项目根目录中的 <code>app.wxss</code> 会作用于所有小程序页面</li><li>局部页面 .wxss 样式仅对当前页面生效</li></ul><ol start="3"><li>WXSS 仅支持部分 CSS 选择器</li></ol><ul><li>.class 和 #id</li><li>element</li><li>并集选择器，后代选择器</li><li>::after 和 ::before 等伪类选择器</li></ul><ol start="4"><li>样式导入</li></ol><ul><li><code>@import "/common/common.wxss";</code></li></ul><ol start="5"><li>全局样式<br>在 app.wxss 中的样式为全局样式，作用于每一个页面</li></ol><hr><h1 id="组件"><a class="anchor" href="#组件">#</a> 组件</h1><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2NvbXBvbmVudC9jb3Zlci1pbWFnZS5odG1s">官方文档</span><br>小程序中的组件是由宿主环境提供的，官方把小程序的组件分为了好几大类，分别是：</p><ol><li>视图容器</li><li>基础内容</li><li>表单组件</li><li>导航组件</li><li>媒体组件</li><li>map 地图组件</li><li>canvas 画布组件</li><li>开放能力</li><li>原生组件说明</li><li>无障碍访问</li><li>导航栏</li><li>页面属性配置节点</li></ol><h2 class="rainbow" id="常见的组件"><a class="anchor" href="#常见的组件">#</a> 常见的组件</h2><ul><li><p>view</p><ul><li>普通视图区域</li><li>类似 HTML 中的 div, 是一个块级元素</li><li>常用来实现页面的布局效果</li></ul></li><li><p>scroll-view</p><ul><li>可滚动的视图区域</li><li>常用来实现滚动列表效果</li></ul></li><li><p>swiper 和 swiper-item</p><ul><li>轮播图</li></ul></li><li><p>button</p><ul><li>按钮组件 可以通过 <code>open-type</code> 属性调用微信提供的各种功能 (客服 转发 获取用户限权 获取用户信息等)</li></ul></li></ul><hr><h1 id="wxml-模板语法"><a class="anchor" href="#wxml-模板语法">#</a> WXML 模板语法</h1><h2 id="数据绑定"><a class="anchor" href="#数据绑定">#</a> 数据绑定</h2><ol><li>在 data 中定义数据</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 页面初始数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"雪泥马"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"雪泥马"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">"男"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token literal-property property">img</span><span class="token operator">:</span> <span class="token string">"https://mrnobody233.gitee.io/images/avatar.jpg"</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        </pre></td></tr><tr><td data-num="12"></td><td><pre>        </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="2"><li>在 WXML 中使用数据</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span> <span class="token punctuation">{</span> msg <span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span> <span class="token punctuation">{</span> list<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 动态绑定属性 与 vue 不同</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"{list.img}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><h2 id="事件绑定"><a class="anchor" href="#事件绑定">#</a> 事件绑定</h2><p><strong>小程序中的常用事件</strong></p><ol><li>bindtap 手指触摸后马上离开，类似 HTML 中的 click</li></ol><ul><li>为按钮绑定 tap 触摸事件<br><code>&lt;button bindtap="btnClick"&gt;点我&lt;/button&gt;</code></li><li>在 js 文件中定义对应的事件处理函数</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">"雪泥马"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 事件参数通过形参 event （简写 e） 来接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">*</span><span class="token comment">// 通过调用 `this.setData (dataObject)` 方法可以给页面中的数据重新赋值</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"布雪蜡"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ul><li><p>事件传参<br>小程序<span style="color:red">不能在绑定事件的同时为事件处理函数传递参数</span>，可以为组件提供 <code>data-name</code> 自定义属性传参，其中 name 代表的是参数的名字</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"btnClick"</span> data<span class="token operator">-</span>step<span class="token operator">=</span><span class="token string">"{2}"</span><span class="token operator">&gt;</span>事件传参<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><p>通过 <code>event.target.dataset.参数名</code> 来获得具体参数值</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>          <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"布雪蜡"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">// 沙比吧。。。</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure></li></ul><ol start="2"><li>bindinput 文本框的输入事件</li></ol><ul><li>为文本框绑定事件<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"iptHandler"</span>  type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">/</span><span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure></li><li>在 js 页面中定义事件处理函数<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">iptHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token comment">//e.detail.value 是变化后文本框最新的值</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure></li></ul><ol><li>bindchange 状态改变时触发</li></ol><hr><p>当事件回调触发的时候，会收到一个事件对象 event</p><table><thead><tr><th>属性</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>事件类型</td></tr><tr><td>timeStamp</td><td>integer</td><td>页面打开到触发事件所经过的毫秒数</td></tr><tr><td><strong>target</strong></td><td><strong>Object</strong></td><td><strong>触发事件的组件的一些属性值集合</strong></td></tr><tr><td>currentTarget</td><td>Object</td><td>当前组件的一些属性值集合</td></tr><tr><td><strong>detail</strong></td><td><strong>Object</strong></td><td><strong>额外的信息</strong></td></tr><tr><td>touches</td><td>Array</td><td>触摸事件，当前停留在屏幕中的触摸点信息的组件</td></tr><tr><td>changedTouches</td><td>Array</td><td>触摸事件，当前变化的触摸点属性的数组</td></tr></tbody></table><h2 id="条件渲染"><a class="anchor" href="#条件渲染">#</a> 条件渲染</h2><ol><li>在小程序中，使用 <code>wx:if="{ isShow }"</code> <code>wx:else</code> <code>wx:elif</code> 来判断是否需要渲染该代码块</li></ol><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{isShow}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span>{isShow}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShow<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>你干嘛~哎哟<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">isShow</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">isShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isShow</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><ol start="2"><li>结合 <code>&lt;blok&gt;</code> 使用 wx:if</li></ol><p>如果想要 <strong>一次性控制多个组件的展示和隐藏</strong> 可以使用一个 <code>&lt;block&gt;&lt;/block&gt;</code> 将多个组件包装起来。并在标签上使用 wx:if 控制属性，<block>不是一个组件，<strong>不会在页面中做任何渲染</strong></block></p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ isShow }<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>雪泥马<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>布雪蜡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><ol start="3"><li>hidden</li></ol><p>懒得说了 和 vue 中的条件渲染一样，一个是直接移除元素，一个是切换 display:none/block 样式</p><h2 id="列表渲染"><a class="anchor" href="#列表渲染">#</a> 列表渲染</h2><ol><li>wx:for 和 v-for 一样，循环渲染重复的组件结构，语法稍微有些不同</li></ol><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{phoneList}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>索引是：{index}, item项是：{item}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><ol start="2"><li>wx:key 不多说了</li></ol><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{phoneList}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wv:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>索引是：{index}, item项是：{item}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><hr><h1 id="全局配置"><a class="anchor" href="#全局配置">#</a> 全局配置</h1><h2 id="常用配置项目"><a class="anchor" href="#常用配置项目">#</a> 常用配置项目</h2><p>小程序根目录下的 <code>app.json</code> 文件是小程序的全局配置文件，下面是常用的几个配置文件</p><ol><li>pages</li></ol><ul><li>记录当前小程序所有页面的存放路径</li></ul><ol start="2"><li><strong>window</strong></li></ol><ul><li>全局设置小程序窗口的外观</li></ul><ol start="3"><li><strong>tabBar</strong></li></ol><ul><li>设置小程序底部的 tabBar 效果</li></ul><ol start="4"><li>style</li></ol><ul><li>是否启用新版的组件样式</li></ul><h2 id="window节点常用的配置项"><a class="anchor" href="#window节点常用的配置项">#</a> window 节点常用的配置项</h2><table><thead><tr><th>属性名</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>navigationBarTitleText</td><td>String</td><td>字符串</td><td>导航栏标题文字</td></tr><tr><td>navigationBarBackgroundColor</td><td>HexColor</td><td>#000</td><td>导航栏背景颜色</td></tr><tr><td>navigationBarTextStyle</td><td>String</td><td>white</td><td>导航栏标题颜色，只支持 white 和 black..</td></tr><tr><td>backgroundColor</td><td>HexColor</td><td>#fff</td><td>窗口背景颜色</td></tr><tr><td>backgroundTextStyle</td><td>String</td><td>dark</td><td>下拉 loading 的样式 仅支持 dark /light</td></tr><tr><td>enablePullDownRefresh</td><td>Bollean</td><td>false</td><td>是否全局开启下拉刷新</td></tr><tr><td>onReachBottomDistance</td><td>Number</td><td>50</td><td>页面上拉触底事件触发时距页面底部距离 单位为 px</td></tr></tbody></table><h2 id="tabbar"><a class="anchor" href="#tabbar">#</a> tabBar</h2><p>用于实现多页面的快速切换，小程序一般分为 底部和顶部，<strong>注意：</strong> tabBar 中只能配置<strong>最少 2 个</strong>，<strong>最多 5 个</strong> tab 标签，当渲染<strong>顶部 tabBar</strong> 时，<strong>不显示 icon</strong>，只显示文本</p><h3 id="tabbar的6个组成部分"><a class="anchor" href="#tabbar的6个组成部分">#</a> tabBar 的 6 个组成部分</h3><ol><li>backgroundColor: 背景色</li><li>selectedIconPath: 选中时的图片路径</li><li>borderStyle：tabBar 的边框颜色</li><li>iconPath：未选中的图片路径</li><li>selectedColor：tabBar 上文字选中时的颜色</li><li>color：未选中时的文字颜色</li></ol><h3 id="tabbar节点配置项"><a class="anchor" href="#tabbar节点配置项">#</a> tabBar 节点配置项</h3><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#ccc"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token property">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#000"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/indexActive.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/index.png"</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/demo/demo"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"演示"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/msgActive.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/msg.png"</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/call/call"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"电话"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/callActive.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"./imagses/call.png"</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><hr><h1 id="网络数据请求"><a class="anchor" href="#网络数据请求">#</a> 网络数据请求</h1><h2 id="限制"><a class="anchor" href="#限制">#</a> 限制</h2><p>出于安全方面考虑，小程序官方对<strong>数据接口的请求</strong>做成了如下两个限制</p><ol><li>只能请求 HTTPS 类型的接口<ul><li><strong>登录小程序管理后台</strong> -&gt; <strong>开发</strong> -&gt; <strong>开发管理</strong> -&gt;<strong> 开发设置</strong> -&gt; <strong>服务器域名</strong> -&gt; <strong>修改 request 合法域名</strong></li></ul></li><li>必须将接口的域名添加到信任列表中</li></ol><h2 id="发起请求"><a class="anchor" href="#发起请求">#</a> 发起请求</h2><p>调用小程序提供的 <code>wx.request()</code> 方法，可以发起 GET 数据请求</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre>wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://www.escook.cn/api/get'</span><span class="token punctuation">,</span> <span class="token comment">// 地址</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>   <span class="token comment">// 方法</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token comment">// 传送的数据 </span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 返回的结果</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><hr><h1 id="页面导航"><a class="anchor" href="#页面导航">#</a> 页面导航</h1><p>指页面之间的相互跳转，在小程序中实现页面导航的两种方式</p><ol><li>声明式导航</li></ol><ul><li>在页面中声明一个 <code>&lt;navigator&gt;</code> 导航组件</li><li>通过点击 <code>&lt;navigator&gt;</code> 组件实现页面跳转</li></ul><ol start="2"><li>编程式导航</li></ol><ul><li>调用小程序提供的导航 API，实现页面的跳转</li></ul><h2 id="声明式导航"><a class="anchor" href="#声明式导航">#</a> 声明式导航</h2><h3 id="导航到-tabbar-页面"><a class="anchor" href="#导航到-tabbar-页面">#</a> 导航到 tabBar 页面</h3><p><strong>tabBar</strong> 页面指的是被配置为 tabBar 的页面<br>在使用 <code>&lt;navigator&gt;</code> 组件跳转到指定的 tabBar 页面时，需要指定<strong> url</strong> 属性和<strong> open-type</strong> 属性。</p><ul><li>url 表示要跳转的页面的地址 必须以 / 开头</li><li>open-type 表示跳转的方式 如果是 tabBar 页面 必须为<strong> switchTab</strong></li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/index/index<span class="token punctuation">"</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switchTab<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>跳转首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><h3 id="跳转到非-tabbar页面"><a class="anchor" href="#跳转到非-tabbar页面">#</a> 跳转到非 tabBar 页面</h3><p>意思是没有被配置 tabBar 的页面</p><p>只需要将属性 <strong>open-type</strong> 设置为 <strong>navigate</strong> 即可</p><p>实际上不加也行，open-type 的默认值就是 navigate</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/info/info<span class="token punctuation">"</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>跳转info页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><h3 id="后退导航"><a class="anchor" href="#后退导航">#</a> 后退导航</h3><p>如果要后退到上一页面或多级页面，则需要指定 open-type 属性 和 delta 属性</p><ul><li>open-type 的值必须是 <strong>navigateBack</strong> 表示进行后退导航</li><li>delta 的值必须是数字，表示后退的层级</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigateBack<span class="token punctuation">"</span></span> <span class="token attr-name">delta</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>返回上一级<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><p>也可以省略 delta 属性 ，默认值就是 1</p><h2 id="编程式导航"><a class="anchor" href="#编程式导航">#</a> 编程式导航</h2><h3 id="跳转到-tabbar-页面"><a class="anchor" href="#跳转到-tabbar-页面">#</a> 跳转到 tabBar 页面</h3><p>通过 <code>wx.switchTab(Object Object)</code> 方法，可以跳转到 tabBar 页面。其中 Object 参数对象的属性列表如下</p><p>其中 url 参数是必填，其他是可选</p><table><thead><tr><th>属性</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>需要跳转的 tabBar 页面的路径，路径后不能携带参数</td></tr><tr><td>success</td><td>function</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>function</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>function</td><td>接口调用结束的回调函数 (调用成功，失败都会执行)</td></tr></tbody></table><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gotoIndex<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>跳转到首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// 跳转到首页</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">gotoIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/index/index'</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h3 id="跳转到非tabbar页面"><a class="anchor" href="#跳转到非tabbar页面">#</a> 跳转到非 tabBar 页面</h3><p>调用 <code>wx.navigateTo(Object Object</code> 方法，object 参数对象和上一个一样，就不做演示了</p><h3 id="后退导航-2"><a class="anchor" href="#后退导航-2">#</a> 后退导航</h3><p>一样的，懒得说了 换成 <code>wx.navigateBack()</code> 就行 不过是 url 换成了 delta 而已</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">backOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">delta</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h2 id="导航传参"><a class="anchor" href="#导航传参">#</a> 导航传参</h2><ol><li>声明式导航传参</li></ol><ul><li>参数与路径之间使用？分格</li><li>参数键与参数值用 = 相连</li><li>不同参数用 &amp; 分格</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/info/info?name=zs&amp;age=20<span class="token punctuation">"</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>跳转info页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><ol start="2"><li><p>编程式导航也是一样的</p></li><li><p>在 onLoad 中接收导航传参</p></li></ol><p>通过声明式导航传参和编程式导航传参所携带的参数，可以直接在 onLoad 事件中直接获取到</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>     * 生命周期函数 -- 监听页面加载</pre></td></tr><tr><td data-num="3"></td><td><pre>     */</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><hr><h1 id="页面事件"><a class="anchor" href="#页面事件">#</a> 页面事件</h1><h2 id="下拉刷新事件"><a class="anchor" href="#下拉刷新事件">#</a> 下拉刷新事件</h2><p>就是手指在屏幕的下拉滑动操作，从而重新加载页面数据</p><ol><li><p>全局开启下拉刷新<br>在 app.json 的 window 节点中将 enablePullDownRefresh 设置成 true 就行</p></li><li><p>局部开启下拉刷新</p></li></ol><p>在对应的 json window 节点中设置就行 推荐使用第二种方式</p><ol start="3"><li>监听页面的下拉刷新事件</li></ol><p>在页面的.js 文件中，通过 <code>onPullDownRefresh()</code> 函数即可监听当前的下拉刷新事件</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"触发了demo页面的下拉刷新"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><ol start="4"><li><strong>停止下拉刷新的效果</strong></li></ol><p>当处理完下拉刷新后，loading 效果会一直显示，不会主动消失，调用 <code>wx.stopPullDownRefresh()</code> 就可以停止当前页面的下拉刷新</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"触发了demo页面的下拉刷新"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h2 id="上拉触底事件"><a class="anchor" href="#上拉触底事件">#</a> 上拉触底事件</h2><p>通过手指在屏幕上的上拉滑动操作，从而加载更多数据的行为</p><ol><li>监听页面的上拉触底事件</li></ol><p>在页面的.js 文件中，通过 <code>onReachBottom()</code> 函数即可监听当前页面的上拉触底事件</p><ol start="2"><li>配置上拉触底距离</li></ol><p>触发上拉触底事件时，滚动条距离页面底部的距离<br>可以在.json 文件中 通过 <code>onReachBottomDistance</code> 来配置触底的距离 默认为 50px</p><ol start="3"><li>添加 loading 提示效果</li></ol><p>wx.showLoading () 可以显示 loading 提示框效果<br>wx.hideLoading () 关闭提示效果</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">getColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'数据加载中...'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://www.escook.cn/api/color'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>              <span class="token literal-property property">colorList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>colorList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>          <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><hr><h1 id="生命周期"><a class="anchor" href="#生命周期">#</a> 生命周期</h1><p>指一个对象从 创建 -&gt; 运行 -&gt; 销毁 的整个阶段，强调的是一个时间段</p><ol><li>应用的生命周期函数</li></ol><p>小程序的生命周期函数需要在 app.js 中进行申明</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">//  小程序初始化完成时，执行此函数，全局只触发一次，可以做初始化的工作</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>，</pre></td></tr><tr><td data-num="4"></td><td><pre>     </pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">//  小程序启动。或从后台进入前台显示时触发</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 小程序从前台进入后台时触发</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="2"><li>页面的生命周期函数</li></ol><p>小程序的页面生命周期函数需要在页面的.js 文件中进行声明</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 监听页面加载，一个页面只调用一次</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment">// 监听页面显示</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>       <span class="token comment">// 监听页面初次渲染完成，一个页面只调用一次</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment">// 监听页面隐藏</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">onUnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>      <span class="token comment">// 监听页面卸载，一个页面只调用一次</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><hr><h1 id="wxs脚本"><a class="anchor" href="#wxs脚本">#</a> WXS 脚本</h1><p>wxs 代码可以编写在 wxml 文件的 <code>&lt;wxs&gt;</code> 标签中，就好像 html 中的 <code>&lt;script&gt;</code> 标签内一样</p><ol><li>内嵌 wxs 脚本<br>wxml 文件中的每个<wxs></wxs>标签，必须提供 module 属性 ，用来指定当前 wxs 的模块名称 方便 wxml 中访问模块中的成员</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{</span>demo<span class="token punctuation">.</span><span class="token function">toUpper</span><span class="token punctuation">(</span><span class="token string">"zs"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>wxs module<span class="token operator">=</span><span class="token string">"demo"</span><span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 将文本转为大写 如 zs=&gt; ZS</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">toUpper</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>wxs<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><p>一般用来当过滤器来使用</p><ol start="2"><li>定义外联的 wxs 脚本</li></ol><p>就好像 javascript 可以编写在.js 后缀的文件中...</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">//tools.wxs 文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 字母小写</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">toLower</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">toLower</span><span class="token operator">:</span> toLower</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><ol start="3"><li>使用外联的 wxs 脚本</li></ol><ul><li>module 用来指定模块的名称</li><li>src 用来指定要引入的脚本路径，必须是相对路径</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span> {m2.toLower("LS")}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../utils/tools.wxs<span class="token punctuation">"</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><hr><h1 id="自定义组件"><a class="anchor" href="#自定义组件">#</a> 自定义组件</h1><h2 id="组件的创建于引用"><a class="anchor" href="#组件的创建于引用">#</a> 组件的创建于引用</h2><ol><li>创建组件<ul><li>在根目录创建 <code>components</code> 文件</li><li>右键新建 component 会自动生成组件对应的 4 个文件 .js .json .wxml .wxss</li></ul></li><li>引用组件<br>在 .json 配置文件中引用即可，全局配置在 <code>app.json</code></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token string-property property">"my-test"</span><span class="token operator">:</span> <span class="token string">"/components/test/test"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><ol start="3"><li>组件与页面的区别</li></ol><ul><li>组件中需要声明 <code>"component": true,</code></li><li>组件的方法需要定义在 <code>methods</code> 节点中</li></ul><h2 id="properties-属性"><a class="anchor" href="#properties-属性">#</a> properties 属性</h2><p>类似 vue 中的 prop</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 完整写法</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>          <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">// 数据类型</span></pre></td></tr><tr><td data-num="6"></td><td><pre>          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span>      <span class="token comment">// 属性默认值</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token comment">// 简写</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token literal-property property">number</span><span class="token operator">:</span> Number </pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><p>父组件传参</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test</span> <span class="token attr-name">number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test</span><span class="token punctuation">&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test</span> <span class="token attr-name">number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{num}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><h2 id="组件的生命周期"><a class="anchor" href="#组件的生命周期">#</a> 组件的生命周期</h2><ul><li>created: 组件实例刚刚被创建时执行</li><li>attached: 组件实例进入页面节点数时执行</li><li>ready: 组件在视图层布局完成后执行</li><li>moved： 组件实例被移动到节点树另一个位置时执行</li><li>detached: 组件实例被从页面节点树移除时执行</li></ul><ol><li>lifetimes 节点<br>在小程序中生命周期可以定义在 <code>lifetimes</code> 内进行声明</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><ol start="2"><li>pageLifetimes 节点<br>组件所在页面的生命周期函数</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 页面被展示</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 页面被隐藏</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 页面尺寸变化</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h2 id="数据监听器"><a class="anchor" href="#数据监听器">#</a> 数据监听器</h2><p>类似 vue 中的 watch 侦听器 ，用于监听和响应任何属性和数字字段的变化，从而执行特定的操作。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// 监听器</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 单个</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token string-property property">'number'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 多个</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token string-property property">'num1,num2'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span>num2</span><span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><p>监听对象属性的变化</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token string-property property">'object.num1,object.num2'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span>num2</span><span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// do something</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h2 id="插槽"><a class="anchor" href="#插槽">#</a> 插槽</h2><p>可以提供一个 <code>&lt;slot&gt;</code> 节点 用于承载组件使用者提供的 wxml 结构</p><ol><li>启用多个插槽</li></ol><p>在自定义组件中，需要使用多个 <code>&lt;slot&gt;</code> 插槽时，可以在.js 文件中通过以下方法打开</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token comment">// 在组件定义时的选项中启动多个 slot</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="2"><li>定义多个插槽</li></ol><p>使用不同的 name 来区分不同的插槽</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><ol start="3"><li>使用多个插槽</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>pinkBox<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"www"</span> slot<span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"www"</span> slot<span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>pinkBox<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><h2 id="父子组件之间的通信"><a class="anchor" href="#父子组件之间的通信">#</a> 父子组件之间的通信</h2><h3 id="父子组件之间通信的3种方式"><a class="anchor" href="#父子组件之间通信的3种方式">#</a> 父子组件之间通信的 3 种方式</h3><ol><li>属性绑定</li></ol><ul><li>用于父组件向子组件的指定属性设置数据，仅能设置 JSON 兼容的数据</li></ul><ol start="2"><li>事件绑定</li></ol><ul><li>用于子组件向父组件传递数据，可以传递任意数据</li></ul><ol start="3"><li>获取组件实例</li></ol><ul><li>父组件可以通过 <code>this.selectComponent()</code> 获取子组件实例对象</li><li>这样就可直接访问子组件的任意数据和方法</li></ul><h3 id="属性绑定"><a class="anchor" href="#属性绑定">#</a> 属性绑定</h3><p>属性绑定用于实现父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 父组件的 data 节点 --&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>data:{</pre></td></tr><tr><td data-num="4"></td><td><pre>  count:0</pre></td></tr><tr><td data-num="5"></td><td><pre>}</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">&lt;!-- 父组件的 wxml 结构 --&gt;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ count }<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><p>子组件在 properties 节点中声明对应的属性并使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// 子组件的 properties 节点</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 完整写法</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">// 类型</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span>      <span class="token comment">//  默认值</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 简写</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">count</span><span class="token operator">:</span>Number</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 子组件的 wxml 结构</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">0</span><span class="token operator">--</span><span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><h3 id="事件绑定-2"><a class="anchor" href="#事件绑定-2">#</a> 事件绑定</h3><p>事件绑定用于实现子向父传值，可以传递任何类型的数据</p><ol><li>在父组件的 js 中定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">syncCount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'syncCount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><ol start="2"><li>在父组件中的 wxml 中，通过自定义事件的形式，将步骤 1 中定义的函数引用，传递给子组件</li></ol><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pinkBox</span> <span class="token attr-name">num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{num}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>syncCount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></pre></td></tr></tbody></table></figure><ol start="3"><li>在子组件的 js 中，通过调用 this.triggerEvent (' 自定义事件名称 ',{参数对象})，将数据发送到父组件</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 触发自定义事件，将数值同步给父组件</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'sync'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>num<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><ol start="4"><li>在父组件的 js 中，通过 <code>e.detail</code> 获取到子组件传递过来的数据</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">syncCount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'syncCount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h3 id="获取组件实例"><a class="anchor" href="#获取组件实例">#</a> 获取组件实例</h3><p>可以在父组件里调用 <code>this.selectComponent("id或class选择器")</code> , 获取子组件的实例对象，从而直接访问子组件的任意数据和方法</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// 父组件 wxml 结构</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>test num<span class="token operator">=</span><span class="token string">"{num}"</span> <span class="token literal-property property">bind</span><span class="token operator">:</span>sync<span class="token operator">=</span><span class="token string">"syncCount"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"customA"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>test<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"getChild"</span><span class="token operator">&gt;</span>获取子组件实例<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// js</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'.customA'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        child<span class="token punctuation">.</span><span class="token function">setdata</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span>child<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>num <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 调用子组件的 setData 方法</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        child<span class="token punctuation">.</span><span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 调用子组件的 addNum 方法</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h2 id="behaviors"><a class="anchor" href="#behaviors">#</a> behaviors</h2><p>用于实现组件之间代码共享的特性，类似 vue 中的 mixins</p><p>每个 behavior 可以包含一组 属性，数据，生命周期函数和方法。 组件引用它时，它的属性，数据和方法会被合并到组件中。</p><p>每个组件可以引用多个 behavior ， behavior 也可以引用其他的 behavior</p><ol><li>创建 behavior</li></ol><p>调用 Behavior (object object) 方法即可创建一个共享的 behavior 实例对象 供所有的组件使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'zs'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="2"><li>导入并使用 behavior</li></ol><p>在组件中，使用 <code>require()</code> 方法导入需要的 behavior，挂在后即可访问 behavior 中的数据和方法</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> myBehavior <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../behaviors/my-behavior"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>myBehavior<span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// wxml</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span> behavior中定义的用户名：<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">1</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr></tbody></table></figure><h1 id="api-promise化"><a class="anchor" href="#api-promise化">#</a> API Promise 化</h1><p>在小程序中，实现 API Promise 化主要依赖于 <code>miniprogram-api-promise</code> 第三方的 npm 包。</p><p><code>npm i -s miniprogram-api-promise</code></p><p>然后在小程序入口文件 app.js 只需要调用一次 promisefyAll () 方法，即可实现异步 API 的 Promise 化</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">//app.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span>promisifyAll<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'miniprogram-api-promise'</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> wxp <span class="token operator">=</span> wx<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">promisifyAll</span><span class="token punctuation">(</span>wx<span class="token punctuation">,</span> wxp<span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><p><strong>调用 promise 化的异步 api</strong></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">async</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> res<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> wx<span class="token punctuation">.</span>p<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://www.escook.cn/api/get'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><h1 id="全局数据共享"><a class="anchor" href="#全局数据共享">#</a> 全局数据共享</h1><p>为了解决组件之间数据共享的问题 类似 vuex</p><p><strong>小程序中的全局数据共享方案</strong></p><p>在小程序中可以使用 <code>mobx-miniprogram</code> 配合 <code>mobx-miniprogram-bindings</code> 实现全局数据共享</p><ul><li>mobx-miniprogram 用来创建 Store 实例对象</li><li>mobx-miniprogram-bindings 用来把 Store 中的共享数据或方法，绑定到组件或页面中使用</li></ul><ol><li>安装 MobX 相关的包</li></ol><p><code>npm i mobx-miniprogram mobx-miniprogram-bindings</code></p><ol start="2"><li>在项目根目录创建 store 文件</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// store\store.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 在这个 js 文件中 专门来创建 Store 的实例对象</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    observable<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    action</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-miniprogram'</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 数据字段</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">numA</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token literal-property property">numB</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 计算属性</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">get</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+</span> <span class="token string">'!!!'</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token comment">//actions 方法 专门用来修改 store 中的值</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token literal-property property">updateNumA</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+=</span> step</pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="3"><li>将 Store 中的成员绑定到<span style="color:red">页面</span>中</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// 页面的 .js 文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 导入需要的成员</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 通过此方法可以将 store 中的数据或者方法绑定到当前页面中</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span>createStoreBindings<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-miniprogram-bindings'</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// </span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span>store<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../store/store'</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 在生命周期函数中进行绑定工作</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings <span class="token operator">=</span> <span class="token function">createStoreBindings</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          store<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>          <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'numA'</span><span class="token punctuation">,</span> <span class="token string">'numB'</span><span class="token punctuation">,</span> <span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要的数据</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'updateNumA'</span><span class="token punctuation">]</span>          <span class="token comment">// 需要的方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    </pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token comment">//  - 监听页面卸载 中做清理的工作</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token function-variable function">onUnload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings<span class="token punctuation">.</span><span class="token function">detoryStoreBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><ol start="4"><li>在页面上使用 Store 中的成员</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">2</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">3</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">4</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"bindHandler"</span> data<span class="token operator">-</span>step<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// js</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">bindHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumA</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>step<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr></tbody></table></figure><p>5. 将 Store 中的成员绑定到<span style="color:red">组件</span>中</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token comment">// components/test/test.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span>storeBindingsBehavior<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-miniprogram-bindings'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">{</span>store<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../store/store'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre>     * 组件的属性列表</pre></td></tr><tr><td data-num="7"></td><td><pre>     */</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>storeBindingsBehavior<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 通过 storeBindingsBehavior 来实现自动绑定、</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">storeBindings</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        store<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定需要绑定的字段数据</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token function-variable function">numA</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>numA<span class="token punctuation">,</span> <span class="token comment">// 绑定字段的 第 1 种方式</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token function-variable function">numB</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>numB<span class="token punctuation">,</span> <span class="token comment">// 绑定字段的 第 2 种方式</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token string">'sum'</span> <span class="token comment">// 绑定字段的 第 3 种方式</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定要绑定的方法</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token literal-property property">updateNumA</span><span class="token operator">:</span> <span class="token string">'updateNumA'</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">)</span></pre></td></tr></tbody></table></figure><p>6. 在组件中使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"containerBox"</span><span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">6</span><span class="token operator">--</span><span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"numAdd"</span> data<span class="token operator">-</span>step<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>   </pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// js</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">numAdd</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumA</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>step<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h1 id="分包"><a class="anchor" href="#分包">#</a> 分包</h1><p>指把一个完整的小程序项目，按需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载，</p><h2 id="使用分包"><a class="anchor" href="#使用分包">#</a> 使用分包</h2><ol><li>配置方法</li></ol><p>开发者通过在 <code>app.json subpackages</code> 字段声明项目分包结构：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token string-property property">"pages"</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string">"pages/index"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string">"pages/logs"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token string-property property">"subpackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token string-property property">"root"</span><span class="token operator">:</span> <span class="token string">"packageA"</span><span class="token punctuation">,</span>  <span class="token comment">//	分包根目录</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>           <span class="token comment">// 分包页面路径，相对于分包根目录</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token string">"pages/cat"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token string">"pages/dog"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token string-property property">"root"</span><span class="token operator">:</span> <span class="token string">"packageB"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"pack2"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token string">"pages/apple"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token string">"pages/banana"</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><ol start="2"><li>引用原则</li></ol><ul><li>主包无法引用分包内的私有资源</li><li>分包之间不能相互引用私有资源</li><li>分包可以引用主包内的公共资源</li></ul><h2 id="独立分包"><a class="anchor" href="#独立分包">#</a> 独立分包</h2><p>独立分包本质上也是分包，但是可以独立于主包和其他分包而单独运行</p><ol><li>独立分包和普通分包的区别</li></ol><ul><li>普通分包必须依赖于主包才能运行</li><li>独立分包可以在不下载主包的情况下独立运行</li></ul><ol start="2"><li>独立分包配置方法</li></ol><p>与普通分包相同，只需在 <code>subpackages</code> 字段中对应的分包配置项中定义 <code>independent</code> 字段声明对应分包为独立分包。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token string-property property">"subpackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token string-property property">"root"</span><span class="token operator">:</span> <span class="token string">"moduleA"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token string">"pages/rabbit"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token string">"pages/squirrel"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token string-property property">"root"</span><span class="token operator">:</span> <span class="token string">"moduleB"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token string">"pages/pear"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token string">"pages/pineapple"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">+</span>      <span class="token string">"independent"</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr></tbody></table></figure><ol start="3"><li>引用原则</li></ol><p>独立分包和普通分包以及主包之间是相互隔绝的，不能相互引用彼此的资源，独立分包也不能引用主包内的公共资源。</p><h2 id="分包预下载"><a class="anchor" href="#分包预下载">#</a> 分包预下载</h2><p>指在进入小程序的某个页面，由框架自动预下载可能需要的分包，从而提高进入后续分包页面的启动速度</p><ol><li>配置分包预下载</li></ol><p>预下载分包行为在进入某个页面时触发，通过在 <code>app.json</code> 增加 <code>preloadRule</code> 配置来控制。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token string-property property">"preloadRule"</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 分包预下载的规则</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token string-property property">"pages/index"</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 触发分包预下载的页面路径</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string-property property">"network"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>   <span class="token comment">// 表示在指定的网络模式下进行预下载，all (不限网络) 和 wifi</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string-property property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"important"</span><span class="token punctuation">]</span>  <span class="token comment">//package 表示进入页面后预下载哪些分包</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token string-property property">"sub1/index"</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string-property property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"sub3"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token string-property property">"sub3/index"</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token string-property property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"path/to"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">}</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token string-property property">"indep/index"</span><span class="token operator">:</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token string-property property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"__APP__"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i> 前端</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag"><i class="ic i-tag"></i> 小程序</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-10-12 21:29:31" itemprop="dateModified" datetime="2022-10-12T21:29:31+08:00">2022-10-12</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Mr_Nobody 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Mr_Nobody 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Mr_Nobody 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Mr_Nobody <i class="ic i-at"><em>@</em></i>MrNobody's Blog</li><li class="link"><strong>本文链接：</strong> <a href="http://mrnobody233.github.io/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">http://mrnobody233.github.io/2022/08/21/微信小程序/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/08/10/%E9%95%BF%E6%B2%99%E4%B9%8B%E6%97%85/" itemprop="url" rel="prev" data-background-image="http:&#x2F;&#x2F;imgapi.xl0408.top&#x2F;index.php?900195" title="长沙之旅"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 生活</span><h3>长沙之旅</h3></a></div><div class="item right"><a href="/2022/08/29/%E5%BC%80%E5%AD%A6%E5%89%8D/" itemprop="url" rel="next" data-background-image="http:&#x2F;&#x2F;imgapi.xl0408.top&#x2F;index.php?726479" title="开学前"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 生活</span><h3>开学前</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#wxml-%E5%92%8C-html-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.</span> <span class="toc-text">WXML 和 HTMl 的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wxss"><span class="toc-number">2.</span> <span class="toc-text">WXSS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-number">2.1.</span> <span class="toc-text">区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">常见的组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wxml-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">WXML 模板语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">4.1.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">4.2.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">4.3.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">4.4.</span> <span class="toc-text">列表渲染</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">全局配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE"><span class="toc-number">5.1.</span> <span class="toc-text">常用配置项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#window%E8%8A%82%E7%82%B9%E5%B8%B8%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">5.2.</span> <span class="toc-text">window 节点常用的配置项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tabbar"><span class="toc-number">5.3.</span> <span class="toc-text">tabBar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tabbar%E7%9A%846%E4%B8%AA%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">5.3.1.</span> <span class="toc-text">tabBar 的 6 个组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabbar%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">5.3.2.</span> <span class="toc-text">tabBar 节点配置项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="toc-number">6.</span> <span class="toc-text">网络数据请求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%90%E5%88%B6"><span class="toc-number">6.1.</span> <span class="toc-text">限制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82"><span class="toc-number">6.2.</span> <span class="toc-text">发起请求</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA"><span class="toc-number">7.</span> <span class="toc-text">页面导航</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">7.1.</span> <span class="toc-text">声明式导航</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E5%88%B0-tabbar-%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.1.1.</span> <span class="toc-text">导航到 tabBar 页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E5%88%B0%E9%9D%9E-tabbar%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.1.2.</span> <span class="toc-text">跳转到非 tabBar 页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA"><span class="toc-number">7.1.3.</span> <span class="toc-text">后退导航</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">7.2.</span> <span class="toc-text">编程式导航</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E5%88%B0-tabbar-%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.2.1.</span> <span class="toc-text">跳转到 tabBar 页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E5%88%B0%E9%9D%9Etabbar%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.2.2.</span> <span class="toc-text">跳转到非 tabBar 页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA-2"><span class="toc-number">7.2.3.</span> <span class="toc-text">后退导航</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">7.3.</span> <span class="toc-text">导航传参</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">页面事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">下拉刷新事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.2.</span> <span class="toc-text">上拉触底事件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">9.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wxs%E8%84%9A%E6%9C%AC"><span class="toc-number">10.</span> <span class="toc-text">WXS 脚本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">11.</span> <span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%9B%E5%BB%BA%E4%BA%8E%E5%BC%95%E7%94%A8"><span class="toc-number">11.1.</span> <span class="toc-text">组件的创建于引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#properties-%E5%B1%9E%E6%80%A7"><span class="toc-number">11.2.</span> <span class="toc-text">properties 属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">11.3.</span> <span class="toc-text">组件的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">11.4.</span> <span class="toc-text">数据监听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">11.5.</span> <span class="toc-text">插槽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">11.6.</span> <span class="toc-text">父子组件之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%843%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">11.6.1.</span> <span class="toc-text">父子组件之间通信的 3 种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-number">11.6.2.</span> <span class="toc-text">属性绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A-2"><span class="toc-number">11.6.3.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="toc-number">11.6.4.</span> <span class="toc-text">获取组件实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#behaviors"><span class="toc-number">11.7.</span> <span class="toc-text">behaviors</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#api-promise%E5%8C%96"><span class="toc-number">12.</span> <span class="toc-text">API Promise 化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-number">13.</span> <span class="toc-text">全局数据共享</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E5%8C%85"><span class="toc-number">14.</span> <span class="toc-text">分包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%88%86%E5%8C%85"><span class="toc-number">14.1.</span> <span class="toc-text">使用分包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="toc-number">14.2.</span> <span class="toc-text">独立分包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="toc-number">14.3.</span> <span class="toc-text">分包预下载</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/03/25/First-Vue-Web/" rel="bookmark" title="First_Vue_Web">First_Vue_Web</a></li><li><a href="/2022/03/26/Vue%E6%8C%87%E4%BB%A4/" rel="bookmark" title="Vue指令">Vue指令</a></li><li><a href="/2022/04/01/Vue%E7%BB%84%E4%BB%B6%E5%92%8Cprops/" rel="bookmark" title="Vue组件和props">Vue组件和props</a></li><li><a href="/2022/04/03/Vue-ref%E5%BC%95%E7%94%A8-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/" rel="bookmark" title="Vue-ref引用-作用域插槽">Vue-ref引用-作用域插槽</a></li><li><a href="/2022/04/05/Vue%E8%B7%AF%E7%94%B1/" rel="bookmark" title="Vue路由">Vue路由</a></li><li><a href="/2022/04/10/Vue%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB/" rel="bookmark" title="Vue数据共享">Vue数据共享</a></li><li><a href="/2022/04/10/Vue%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6-watch%E7%9B%91%E5%90%AC%E5%99%A8/" rel="bookmark" title="Vue计算属性-自定义事件-watch监听器">Vue计算属性-自定义事件-watch监听器</a></li><li><a href="/2022/04/14/Vuex/" rel="bookmark" title="Vuex">Vuex</a></li><li><a href="/2022/04/19/axios/" rel="bookmark" title="axios">axios</a></li><li><a href="/2022/04/21/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-%E7%94%B5%E5%95%86%E7%AE%A1%E7%90%86%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" rel="bookmark" title="黑马程序员-电商管理知识总结">黑马程序员-电商管理知识总结</a></li><li><a href="/2022/04/23/flex%E5%B8%83%E5%B1%80/" rel="bookmark" title="flex布局">flex布局</a></li><li><a href="/2022/04/24/axios%E6%8B%A6%E6%88%AA%E5%99%A8/" rel="bookmark" title="axios拦截器">axios拦截器</a></li><li><a href="/2022/05/03/Vue3-%E5%B8%B8%E7%94%A8CompositionAPi/" rel="bookmark" title="Vue3-常用CompositionAPi">Vue3-常用CompositionAPi</a></li><li><a href="/2022/05/11/axios%E5%B0%81%E8%A3%85/" rel="bookmark" title="axios封装">axios封装</a></li><li><a href="/2022/05/20/vue3-vuex/" rel="bookmark" title="Vue3-vuex">Vue3-vuex</a></li><li><a href="/2022/05/30/Vuex%E6%8C%81%E4%B9%85%E5%8C%96/" rel="bookmark" title="Vuex持久化">Vuex持久化</a></li><li><a href="/2022/08/01/Vue%E5%8A%A8%E7%94%BB/" rel="bookmark" title="Vue动画">Vue动画</a></li><li><a href="/2022/08/04/Vue%E6%87%92%E5%8A%A0%E8%BD%BD/" rel="bookmark" title="Vue懒加载">Vue懒加载</a></li><li class="active"><a href="/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="bookmark" title="微信小程序">微信小程序</a></li><li><a href="/2023/07/05/%E6%9C%AA%E6%8E%8C%E6%8F%A1%E6%88%96%E8%A2%AB%E9%81%97%E5%BF%98%E7%9A%84vue2/" rel="bookmark" title="未掌握或被遗忘的vue2">未掌握或被遗忘的vue2</a></li><li><a href="/2023/07/19/%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/" rel="bookmark" title="实习总结">实习总结</a></li><li><a href="/2023/08/16/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEAPI/" rel="bookmark" title="高德地图API">高德地图API</a></li><li><a href="/2023/09/12/%E5%AF%BC%E5%85%A5Excel%E5%B9%B6%E5%9B%9E%E6%98%BE/" rel="bookmark" title="导入Excel并回显">导入Excel并回显</a></li><li><a href="/2023/09/14/js%E5%AF%B9%E8%B1%A1/" rel="bookmark" title="js对象">js对象</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Mr_Nobody" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Mr_Nobody</p><div class="description" itemprop="description">MrNobody</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">71</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">3</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">18</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL21ybm9ib2R5MjMz" title="https:&#x2F;&#x2F;github.com&#x2F;mrnobody233"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQxNDk3NjY2Mg==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;414976662"><i class="ic i-cloud-music"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMjEzODMwMTc/c3BtX2lkX2Zyb209MzMzLjEwMDcuMC4w" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;21383017?spm_id_from&#x3D;333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>links</a></li><li class="item"><a href="/dream/" rel="section"><i class="ic i-cloud"></i>dream</a></li><li class="item"><a href="/book/" rel="section"><i class="ic i-sakura"></i>book</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/08/10/%E9%95%BF%E6%B2%99%E4%B9%8B%E6%97%85/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/08/29/%E5%BC%80%E5%AD%A6%E5%89%8D/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E7%94%9F%E6%B4%BB/" title="分类于 生活">生活</a></div><span><a href="/2022/06/19/%E4%BB%80%E4%B9%88%E4%BB%80%E4%B9%88%E4%BB%80%E4%B9%88/" title="什么什么什么">什么什么什么</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/04/03/Vue-ref%E5%BC%95%E7%94%A8-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/" title="Vue-ref引用-作用域插槽">Vue-ref引用-作用域插槽</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/03/26/Vue%E6%8C%87%E4%BB%A4/" title="Vue指令">Vue指令</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%94%9F%E6%B4%BB/" title="分类于 生活">生活</a></div><span><a href="/2022/07/07/%E6%88%91%E7%9B%B4%E6%8E%A5%E5%97%A8/" title="我直接嗨">我直接嗨</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/04/24/axios%E6%8B%A6%E6%88%AA%E5%99%A8/" title="axios拦截器">axios拦截器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">微信小程序</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2023/09/12/%E5%AF%BC%E5%85%A5Excel%E5%B9%B6%E5%9B%9E%E6%98%BE/" title="导入Excel并回显">导入Excel并回显</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%94%9F%E6%B4%BB/" title="分类于 生活">生活</a></div><span><a href="/2022/04/23/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8B%86%E6%9C%BA/" title="第一次拆机">第一次拆机</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/08/04/Vue%E6%87%92%E5%8A%A0%E8%BD%BD/" title="Vue懒加载">Vue懒加载</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/web%E5%89%8D%E7%AB%AF/" title="分类于 web前端">web前端</a></div><span><a href="/2022/04/19/axios/" title="axios">axios</a></span></li></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Mr_Nobody @ MrNobody</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">227k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">3:26</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/08/21/微信小程序/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!0},log:!1})</script></body></html><!-- rebuild by hrmmi -->